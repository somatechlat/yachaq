# Test Configuration - Uses REAL Infrastructure
# VIBE CODING RULES: Rule #7 - REAL DATA & SERVERS ONLY
# NO H2, NO mocks, NO fake databases, NO Testcontainers
#
# All tests run against real Docker infrastructure:
#   PostgreSQL: localhost:55432
#   Redis: localhost:55379
#   Kafka: localhost:55092
#   Neo4j: localhost:55474/55687

spring:
  datasource:
    url: jdbc:postgresql://localhost:55432/yachaq
    username: yachaq
    password: yachaq
    driver-class-name: org.postgresql.Driver
    hikari:
      connection-timeout: 30000
      maximum-pool-size: 10
  flyway:
    enabled: true
    locations: classpath:db/migration
    clean-disabled: false
    baseline-on-migrate: true
    validate-on-migrate: false
  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
    show-sql: false
  data:
    redis:
      host: localhost
      port: 55379
  security:
    oauth2:
      client:
        registration:
          google:
            client-id: test-google-client-id
            client-secret: test-google-client-secret
          apple:
            client-id: test-apple-client-id
            client-secret: test-apple-client-secret

yachaq:
  jwt:
    secret: test-secret-key-minimum-32-characters-long-for-testing-purposes
    access-token-validity: 900
    refresh-token-validity: 604800
  screening:
    policy-version: "1.0.0"
    min-cohort-size: 50
    manual-review-threshold: 0.5
  security:
    platform-key-id: test-platform-key-v1
  privacy:
    k-min: 50
    linkage-window-hours: 24
    linkage-max-similar: 10
    similarity-threshold: 0.8
    ruleset-version: "1.0.0"
